{"ShowPlanXML": {"@xmlns": "http://schemas.microsoft.com/sqlserver/2004/07/showplan", "@Version": "1.564", "@Build": "16.0.1000.6", "BatchSequence": {"Batch": {"Statements": {"StmtSimple": {"@StatementText": "exec time_remaining  'E7FAB167-C47A-4865-A8AE-429FA778414C', 'E7FAB167-C47A-4865-A8AE-429FA778414C', 1", "@StatementId": "1", "@StatementCompId": "1", "@StatementType": "EXECUTE PROC", "@RetrievedFromCache": "false", "StoredProc": {"@ProcName": "time_remaining", "Statements": {"StmtSimple": [{"@StatementText": "\r\nCREATE procedure [dbo].[time_remaining]\r\n@t_testing_id uniqueidentifier, \r\n@t_test_id uniqueidentifier,\r\n@seconds_remain int output  \r\nas \r\ndeclare @start_time datetime\r\ndeclare @STOP_TIME_SEC int\r\ndeclare @timelimitmin int \r\n\r\nset @timelimitmin=0\r\n\r\n\r\n", "@StatementId": "2", "@StatementCompId": "3", "@StatementType": "ASSIGN", "@RetrievedFromCache": "false"}, {"@StatementText": "select @timelimitmin=isnull(timelimitmin,0)\r\nfrom t_test \r\nwhere t_test_id=@t_test_id", "@StatementId": "3", "@StatementCompId": "4", "@StatementType": "SELECT", "@RetrievedFromCache": "false", "@StatementSubTreeCost": "0.0032832", "@StatementEstRows": "1", "@SecurityPolicyApplied": "false", "@StatementOptmLevel": "TRIVIAL", "@QueryHash": "0x284D9D00AA811AE8", "@QueryPlanHash": "0x852AE8E227D0577E", "@CardinalityEstimationModelVersion": "70", "StatementSetOptions": {"@QUOTED_IDENTIFIER": "true", "@ARITHABORT": "true", "@CONCAT_NULL_YIELDS_NULL": "true", "@ANSI_NULLS": "true", "@ANSI_PADDING": "true", "@ANSI_WARNINGS": "true", "@NUMERIC_ROUNDABORT": "false"}, "QueryPlan": {"@CachedPlanSize": "16", "@CompileTime": "1", "@CompileCPU": "1", "@CompileMemory": "200", "MemoryGrantInfo": {"@SerialRequiredMemory": "0", "@SerialDesiredMemory": "0", "@GrantedMemory": "0", "@MaxUsedMemory": "0"}, "OptimizerHardwareDependentProperties": {"@EstimatedAvailableMemoryGrant": "311472", "@EstimatedPagesCached": "77868", "@EstimatedAvailableDegreeOfParallelism": "2", "@MaxCompileMemory": "577848"}, "RelOp": {"@NodeId": "0", "@PhysicalOp": "Compute Scalar", "@LogicalOp": "Compute Scalar", "@EstimateRows": "1", "@EstimateIO": "0", "@EstimateCPU": "1e-07", "@AvgRowSize": "11", "@EstimatedTotalSubtreeCost": "0.0032832", "@Parallel": "0", "@EstimateRebinds": "0", "@EstimateRewinds": "0", "@EstimatedExecutionMode": "Row", "OutputList": {"ColumnReference": {"@Column": "Expr1002"}}, "ComputeScalar": {"DefinedValues": {"DefinedValue": {"ColumnReference": {"@Column": "Expr1002"}, "ScalarOperator": {"@ScalarString": "isnull([PSYCHOLOGY_TEST_1].[dbo].[T_TEST].[TIMELIMITMIN],(0))", "Intrinsic": {"@FunctionName": "isnull", "ScalarOperator": [{"Identifier": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TEST]", "@Column": "TIMELIMITMIN"}}}, {"Const": {"@ConstValue": "(0)"}}]}}}}, "RelOp": {"@NodeId": "1", "@PhysicalOp": "Clustered Index Seek", "@LogicalOp": "Clustered Index Seek", "@EstimateRows": "1", "@EstimatedRowsRead": "1", "@EstimateIO": "0.003125", "@EstimateCPU": "0.0001581", "@AvgRowSize": "11", "@EstimatedTotalSubtreeCost": "0.0032831", "@TableCardinality": "19", "@Parallel": "0", "@EstimateRebinds": "0", "@EstimateRewinds": "0", "@EstimatedExecutionMode": "Row", "OutputList": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TEST]", "@Column": "TIMELIMITMIN"}}, "IndexScan": {"@Ordered": "1", "@ScanDirection": "FORWARD", "@ForcedIndex": "0", "@ForceSeek": "0", "@ForceScan": "0", "@NoExpandHint": "0", "@Storage": "RowStore", "DefinedValues": {"DefinedValue": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TEST]", "@Column": "TIMELIMITMIN"}}}, "Object": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TEST]", "@Index": "[PK_T_TEST_1]", "@IndexKind": "Clustered", "@Storage": "RowStore"}, "SeekPredicates": {"SeekPredicateNew": {"SeekKeys": {"Prefix": {"@ScanType": "EQ", "RangeColumns": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TEST]", "@Column": "T_TEST_ID"}}, "RangeExpressions": {"ScalarOperator": {"@ScalarString": "[@t_test_id]", "Identifier": {"ColumnReference": {"@Column": "@t_test_id"}}}}}}}}}}}}, "ParameterList": {"ColumnReference": {"@Column": "@t_test_id", "@ParameterDataType": "uniqueidentifier", "@ParameterCompiledValue": "{guid'E7FAB167-C47A-4865-A8AE-429FA778414C'}"}}}}], "StmtCond": {"@StatementText": "\r\n\r\nif @timelimitmin>0", "@StatementId": "4", "@StatementCompId": "5", "@StatementType": "COND", "@RetrievedFromCache": "false", "Condition": null, "Then": {"Statements": {"StmtSimple": [{"@StatementText": "\r\nbegin\r\n\r\n--set @seconds_remain=200\r\n\r\n\r\nselect  \r\n@start_time=min(isnull(ts.view_date,getdate()))\r\n--ts.view_date,\r\n,@STOP_TIME_SEC=min(isnull(tt.STOP_TIME_SEC,0))\r\nfrom t_testing_step ts\r\ninner join t_test_step s on ts.t_test_step_id=s.t_test_step_id\r\ninner join t_testing_test tt on s.t_test_id=tt.t_test_id \r\nwhere s.t_test_id=@t_test_id\r\nand ts.t_testing_id=@t_testing_id\r\nand tt.t_testing_id=@t_testing_id", "@StatementId": "5", "@StatementCompId": "6", "@StatementType": "SELECT", "@RetrievedFromCache": "false", "@StatementSubTreeCost": "0.302127", "@StatementEstRows": "1", "@SecurityPolicyApplied": "false", "@StatementOptmLevel": "FULL", "@QueryHash": "0xCC905494F59A7856", "@QueryPlanHash": "0x2033733E2AC049CA", "@StatementOptmEarlyAbortReason": "TimeOut", "@CardinalityEstimationModelVersion": "70", "StatementSetOptions": {"@QUOTED_IDENTIFIER": "true", "@ARITHABORT": "true", "@CONCAT_NULL_YIELDS_NULL": "true", "@ANSI_NULLS": "true", "@ANSI_PADDING": "true", "@ANSI_WARNINGS": "true", "@NUMERIC_ROUNDABORT": "false"}, "QueryPlan": {"@CachedPlanSize": "40", "@CompileTime": "7", "@CompileCPU": "7", "@CompileMemory": "552", "MissingIndexes": {"MissingIndexGroup": {"@Impact": "95.6599", "MissingIndex": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_STEP]", "ColumnGroup": [{"@Usage": "EQUALITY", "Column": {"@Name": "[T_TESTING_ID]", "@ColumnId": "4"}}, {"@Usage": "INCLUDE", "Column": [{"@Name": "[T_TEST_STEP_ID]", "@ColumnId": "6"}, {"@Name": "[VIEW_DATE]", "@ColumnId": "8"}]}]}}}, "MemoryGrantInfo": {"@SerialRequiredMemory": "0", "@SerialDesiredMemory": "0", "@GrantedMemory": "0", "@MaxUsedMemory": "0"}, "OptimizerHardwareDependentProperties": {"@EstimatedAvailableMemoryGrant": "311472", "@EstimatedPagesCached": "77868", "@EstimatedAvailableDegreeOfParallelism": "2", "@MaxCompileMemory": "577848"}, "RelOp": {"@NodeId": "0", "@PhysicalOp": "Stream Aggregate", "@LogicalOp": "Aggregate", "@EstimateRows": "1", "@EstimateIO": "0", "@EstimateCPU": "1.1e-06", "@AvgRowSize": "19", "@EstimatedTotalSubtreeCost": "0.302127", "@Parallel": "0", "@EstimateRebinds": "0", "@EstimateRewinds": "0", "@EstimatedExecutionMode": "Row", "OutputList": {"ColumnReference": [{"@Column": "Expr1003"}, {"@Column": "Expr1004"}]}, "StreamAggregate": {"DefinedValues": {"DefinedValue": [{"ColumnReference": {"@Column": "Expr1003"}, "ScalarOperator": {"@ScalarString": "MIN(isnull([PSYCHOLOGY_TEST_1].[dbo].[T_TESTING_STEP].[VIEW_DATE] as [ts].[VIEW_DATE],getdate()))", "Aggregate": {"@Distinct": "0", "@AggType": "MIN", "ScalarOperator": {"Intrinsic": {"@FunctionName": "isnull", "ScalarOperator": [{"Identifier": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_STEP]", "@Alias": "[ts]", "@Column": "VIEW_DATE"}}}, {"Identifier": {"ColumnReference": {"@Column": "ConstExpr1005", "ScalarOperator": {"Intrinsic": {"@FunctionName": "getdate"}}}}}]}}}}}, {"ColumnReference": {"@Column": "Expr1004"}, "ScalarOperator": {"@ScalarString": "MIN([Expr1006])", "Aggregate": {"@Distinct": "0", "@AggType": "MIN", "ScalarOperator": {"Identifier": {"ColumnReference": {"@Column": "Expr1006"}}}}}}]}, "RelOp": {"@NodeId": "1", "@PhysicalOp": "Nested Loops", "@LogicalOp": "Inner Join", "@EstimateRows": "1", "@EstimateIO": "0", "@EstimateCPU": "4.18e-06", "@AvgRowSize": "19", "@EstimatedTotalSubtreeCost": "0.302126", "@Parallel": "0", "@EstimateRebinds": "0", "@EstimateRewinds": "0", "@EstimatedExecutionMode": "Row", "OutputList": {"ColumnReference": [{"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_STEP]", "@Alias": "[ts]", "@Column": "VIEW_DATE"}, {"@Column": "Expr1006"}]}, "NestedLoops": {"@Optimized": "0", "RelOp": [{"@NodeId": "2", "@PhysicalOp": "Nested Loops", "@LogicalOp": "Inner Join", "@EstimateRows": "1", "@EstimateIO": "0", "@EstimateCPU": "4.18e-06", "@AvgRowSize": "15", "@EstimatedTotalSubtreeCost": "0.296168", "@Parallel": "0", "@EstimateRebinds": "0", "@EstimateRewinds": "0", "@EstimatedExecutionMode": "Row", "OutputList": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_STEP]", "@Alias": "[ts]", "@Column": "VIEW_DATE"}}, "NestedLoops": {"@Optimized": "0", "OuterReferences": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_STEP]", "@Alias": "[ts]", "@Column": "T_TEST_STEP_ID"}}, "RelOp": [{"@NodeId": "3", "@PhysicalOp": "Clustered Index Scan", "@LogicalOp": "Clustered Index Scan", "@EstimateRows": "1", "@EstimatedRowsRead": "22015", "@EstimateIO": "0.25794", "@EstimateCPU": "0.0243735", "@AvgRowSize": "47", "@EstimatedTotalSubtreeCost": "0.282313", "@TableCardinality": "22015", "@Parallel": "0", "@EstimateRebinds": "0", "@EstimateRewinds": "0", "@EstimatedExecutionMode": "Row", "OutputList": {"ColumnReference": [{"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_STEP]", "@Alias": "[ts]", "@Column": "T_TEST_STEP_ID"}, {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_STEP]", "@Alias": "[ts]", "@Column": "VIEW_DATE"}]}, "IndexScan": {"@Ordered": "0", "@ForcedIndex": "0", "@ForceScan": "0", "@NoExpandHint": "0", "@Storage": "RowStore", "DefinedValues": {"DefinedValue": [{"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_STEP]", "@Alias": "[ts]", "@Column": "T_TEST_STEP_ID"}}, {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_STEP]", "@Alias": "[ts]", "@Column": "VIEW_DATE"}}]}, "Object": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_STEP]", "@Index": "[PK_T_TESTING_STEP]", "@Alias": "[ts]", "@IndexKind": "Clustered", "@Storage": "RowStore"}, "Predicate": {"ScalarOperator": {"@ScalarString": "[PSYCHOLOGY_TEST_1].[dbo].[T_TESTING_STEP].[T_TESTING_ID] as [ts].[T_TESTING_ID]=[@t_testing_id]", "Compare": {"@CompareOp": "EQ", "ScalarOperator": [{"Identifier": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_STEP]", "@Alias": "[ts]", "@Column": "T_TESTING_ID"}}}, {"Identifier": {"ColumnReference": {"@Column": "@t_testing_id"}}}]}}}}}, {"@NodeId": "4", "@PhysicalOp": "Clustered Index Seek", "@LogicalOp": "Clustered Index Seek", "@EstimateRows": "1", "@EstimatedRowsRead": "1", "@EstimateIO": "0.003125", "@EstimateCPU": "0.0001581", "@AvgRowSize": "23", "@EstimatedTotalSubtreeCost": "0.0032831", "@TableCardinality": "940", "@Parallel": "0", "@EstimateRebinds": "0", "@EstimateRewinds": "0", "@EstimatedExecutionMode": "Row", "OutputList": null, "IndexScan": {"@Ordered": "1", "@ScanDirection": "FORWARD", "@ForcedIndex": "0", "@ForceSeek": "0", "@ForceScan": "0", "@NoExpandHint": "0", "@Storage": "RowStore", "DefinedValues": null, "Object": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TEST_STEP]", "@Index": "[PK_T_TEST_STEP]", "@Alias": "[s]", "@IndexKind": "Clustered", "@Storage": "RowStore"}, "SeekPredicates": {"SeekPredicateNew": {"SeekKeys": {"Prefix": {"@ScanType": "EQ", "RangeColumns": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TEST_STEP]", "@Alias": "[s]", "@Column": "T_TEST_STEP_ID"}}, "RangeExpressions": {"ScalarOperator": {"@ScalarString": "[PSYCHOLOGY_TEST_1].[dbo].[T_TESTING_STEP].[T_TEST_STEP_ID] as [ts].[T_TEST_STEP_ID]", "Identifier": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_STEP]", "@Alias": "[ts]", "@Column": "T_TEST_STEP_ID"}}}}}}}}, "Predicate": {"ScalarOperator": {"@ScalarString": "[PSYCHOLOGY_TEST_1].[dbo].[T_TEST_STEP].[T_TEST_ID] as [s].[T_TEST_ID]=[@t_test_id]", "Compare": {"@CompareOp": "EQ", "ScalarOperator": [{"Identifier": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TEST_STEP]", "@Alias": "[s]", "@Column": "T_TEST_ID"}}}, {"Identifier": {"ColumnReference": {"@Column": "@t_test_id"}}}]}}}}}]}}, {"@NodeId": "5", "@PhysicalOp": "Compute Scalar", "@LogicalOp": "Compute Scalar", "@EstimateRows": "1", "@EstimateIO": "0", "@EstimateCPU": "1e-07", "@AvgRowSize": "11", "@EstimatedTotalSubtreeCost": "0.00595378", "@Parallel": "0", "@EstimateRebinds": "0", "@EstimateRewinds": "0", "@EstimatedExecutionMode": "Row", "OutputList": {"ColumnReference": {"@Column": "Expr1006"}}, "ComputeScalar": {"DefinedValues": {"DefinedValue": {"ColumnReference": {"@Column": "Expr1006"}, "ScalarOperator": {"@ScalarString": "isnull([PSYCHOLOGY_TEST_1].[dbo].[T_TESTING_TEST].[STOP_TIME_SEC] as [tt].[STOP_TIME_SEC],(0))", "Intrinsic": {"@FunctionName": "isnull", "ScalarOperator": [{"Identifier": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_TEST]", "@Alias": "[tt]", "@Column": "STOP_TIME_SEC"}}}, {"Const": {"@ConstValue": "(0)"}}]}}}}, "RelOp": {"@NodeId": "6", "@PhysicalOp": "Clustered Index Scan", "@LogicalOp": "Clustered Index Scan", "@EstimateRows": "1", "@EstimatedRowsRead": "227", "@EstimateIO": "0.00534722", "@EstimateCPU": "0.0004067", "@AvgRowSize": "43", "@EstimatedTotalSubtreeCost": "0.00575392", "@TableCardinality": "227", "@Parallel": "0", "@EstimateRebinds": "0", "@EstimateRewinds": "0", "@EstimatedExecutionMode": "Row", "OutputList": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_TEST]", "@Alias": "[tt]", "@Column": "STOP_TIME_SEC"}}, "IndexScan": {"@Ordered": "0", "@ForcedIndex": "0", "@ForceScan": "0", "@NoExpandHint": "0", "@Storage": "RowStore", "DefinedValues": {"DefinedValue": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_TEST]", "@Alias": "[tt]", "@Column": "STOP_TIME_SEC"}}}, "Object": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_TEST]", "@Index": "[PK_T_TESTING_TEST]", "@Alias": "[tt]", "@IndexKind": "Clustered", "@Storage": "RowStore"}, "Predicate": {"ScalarOperator": {"@ScalarString": "[PSYCHOLOGY_TEST_1].[dbo].[T_TESTING_TEST].[T_TEST_ID] as [tt].[T_TEST_ID]=[@t_test_id] AND [PSYCHOLOGY_TEST_1].[dbo].[T_TESTING_TEST].[T_TESTING_ID] as [tt].[T_TESTING_ID]=[@t_testing_id]", "Logical": {"@Operation": "AND", "ScalarOperator": [{"Compare": {"@CompareOp": "EQ", "ScalarOperator": [{"Identifier": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_TEST]", "@Alias": "[tt]", "@Column": "T_TEST_ID"}}}, {"Identifier": {"ColumnReference": {"@Column": "@t_test_id"}}}]}}, {"Compare": {"@CompareOp": "EQ", "ScalarOperator": [{"Identifier": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_TEST]", "@Alias": "[tt]", "@Column": "T_TESTING_ID"}}}, {"Identifier": {"ColumnReference": {"@Column": "@t_testing_id"}}}]}}]}}}}}}}]}}}}, "ParameterList": {"ColumnReference": [{"@Column": "@t_testing_id", "@ParameterDataType": "uniqueidentifier", "@ParameterCompiledValue": "{guid'E7FAB167-C47A-4865-A8AE-429FA778414C'}"}, {"@Column": "@t_test_id", "@ParameterDataType": "uniqueidentifier", "@ParameterCompiledValue": "{guid'E7FAB167-C47A-4865-A8AE-429FA778414C'}"}]}}}, {"@StatementText": "\r\n\r\n\r\nset @seconds_remain=datediff(second, getdate(), @start_time )- isnull(@STOP_TIME_SEC,0) + (60*@timelimitmin)\r\n\r\n", "@StatementId": "6", "@StatementCompId": "7", "@StatementType": "ASSIGN", "@RetrievedFromCache": "false"}]}}}}}}}}}}}