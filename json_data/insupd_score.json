{"ShowPlanXML": {"@xmlns": "http://schemas.microsoft.com/sqlserver/2004/07/showplan", "@Version": "1.564", "@Build": "16.0.1000.6", "BatchSequence": {"Batch": {"Statements": {"StmtSimple": {"@StatementText": "exec insupd_score  'E7FAB167-C47A-4865-A8AE-429FA778414C', 'a'", "@StatementId": "1", "@StatementCompId": "1", "@StatementType": "EXECUTE PROC", "@RetrievedFromCache": "false", "StoredProc": {"@ProcName": "insupd_score", "Statements": {"StmtSimple": [{"@StatementText": "CREATE procedure dbo.insupd_score \r\n@t_testing_step_id uniqueidentifier ,\r\n@score nvarchar(50)\r\n\r\nas\r\ndeclare @t_testing_score_id uniqueidentifier \r\n\r\nset @t_testing_score_id = NULL \r\n\r\n", "@StatementId": "2", "@StatementCompId": "3", "@StatementType": "ASSIGN", "@RetrievedFromCache": "false"}, {"@StatementText": "select @t_testing_score_id=t_testing_score_id\r\nfrom t_testing_score \r\nwhere t_testing_step_id = @t_testing_step_id", "@StatementId": "3", "@StatementCompId": "4", "@StatementType": "SELECT", "@RetrievedFromCache": "false", "@StatementSubTreeCost": "0.0032897", "@StatementEstRows": "1", "@SecurityPolicyApplied": "false", "@StatementOptmLevel": "TRIVIAL", "@QueryHash": "0x2A8263821A79F69D", "@QueryPlanHash": "0x5021626CBFFC3B4C", "@CardinalityEstimationModelVersion": "70", "StatementSetOptions": {"@QUOTED_IDENTIFIER": "true", "@ARITHABORT": "true", "@CONCAT_NULL_YIELDS_NULL": "true", "@ANSI_NULLS": "true", "@ANSI_PADDING": "true", "@ANSI_WARNINGS": "true", "@NUMERIC_ROUNDABORT": "false"}, "QueryPlan": {"@CachedPlanSize": "16", "@CompileTime": "1", "@CompileCPU": "1", "@CompileMemory": "152", "MemoryGrantInfo": {"@SerialRequiredMemory": "0", "@SerialDesiredMemory": "0", "@GrantedMemory": "0", "@MaxUsedMemory": "0"}, "OptimizerHardwareDependentProperties": {"@EstimatedAvailableMemoryGrant": "311472", "@EstimatedPagesCached": "77868", "@EstimatedAvailableDegreeOfParallelism": "2", "@MaxCompileMemory": "654432"}, "RelOp": {"@NodeId": "0", "@PhysicalOp": "Clustered Index Scan", "@LogicalOp": "Clustered Index Scan", "@EstimateRows": "1", "@EstimatedRowsRead": "7", "@EstimateIO": "0.003125", "@EstimateCPU": "0.0001647", "@AvgRowSize": "39", "@EstimatedTotalSubtreeCost": "0.0032897", "@TableCardinality": "7", "@Parallel": "0", "@EstimateRebinds": "0", "@EstimateRewinds": "0", "@EstimatedExecutionMode": "Row", "OutputList": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_SCORE]", "@Column": "T_TESTING_SCORE_ID"}}, "IndexScan": {"@Ordered": "0", "@ForcedIndex": "0", "@ForceScan": "0", "@NoExpandHint": "0", "@Storage": "RowStore", "DefinedValues": {"DefinedValue": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_SCORE]", "@Column": "T_TESTING_SCORE_ID"}}}, "Object": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_SCORE]", "@Index": "[PK_T_TESTINNG_SCORE_1]", "@IndexKind": "Clustered", "@Storage": "RowStore"}, "Predicate": {"ScalarOperator": {"@ScalarString": "[PSYCHOLOGY_TEST_1].[dbo].[T_TESTING_SCORE].[T_TESTING_STEP_ID]=[@t_testing_step_id]", "Compare": {"@CompareOp": "EQ", "ScalarOperator": [{"Identifier": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_SCORE]", "@Column": "T_TESTING_STEP_ID"}}}, {"Identifier": {"ColumnReference": {"@Column": "@t_testing_step_id"}}}]}}}}}, "ParameterList": {"ColumnReference": {"@Column": "@t_testing_step_id", "@ParameterDataType": "uniqueidentifier", "@ParameterCompiledValue": "{guid'E7FAB167-C47A-4865-A8AE-429FA778414C'}"}}}}], "StmtCond": {"@StatementText": "\r\n\r\nif @t_testing_score_id is null", "@StatementId": "4", "@StatementCompId": "5", "@StatementType": "COND", "@RetrievedFromCache": "false", "Condition": null, "Then": {"Statements": {"StmtSimple": {"@StatementText": " \r\ninsert into t_testing_score (t_testing_score_id,score,t_testing_step_id)\r\nvalues (newid(),@score,@t_testing_step_id )", "@StatementId": "5", "@StatementCompId": "6", "@StatementType": "INSERT", "@RetrievedFromCache": "false", "@StatementSubTreeCost": "0.0100023", "@StatementEstRows": "1", "@SecurityPolicyApplied": "false", "@StatementOptmLevel": "TRIVIAL", "@QueryHash": "0x492C65383A171144", "@QueryPlanHash": "0x7792C7276FF6D1C1", "@CardinalityEstimationModelVersion": "70", "StatementSetOptions": {"@QUOTED_IDENTIFIER": "true", "@ARITHABORT": "true", "@CONCAT_NULL_YIELDS_NULL": "true", "@ANSI_NULLS": "true", "@ANSI_PADDING": "true", "@ANSI_WARNINGS": "true", "@NUMERIC_ROUNDABORT": "false"}, "QueryPlan": {"@CachedPlanSize": "16", "@CompileTime": "1", "@CompileCPU": "1", "@CompileMemory": "160", "MemoryGrantInfo": {"@SerialRequiredMemory": "0", "@SerialDesiredMemory": "0", "@GrantedMemory": "0", "@MaxUsedMemory": "0"}, "OptimizerHardwareDependentProperties": {"@EstimatedAvailableMemoryGrant": "311472", "@EstimatedPagesCached": "77868", "@EstimatedAvailableDegreeOfParallelism": "2", "@MaxCompileMemory": "654432"}, "RelOp": {"@NodeId": "0", "@PhysicalOp": "Clustered Index Insert", "@LogicalOp": "Insert", "@EstimateRows": "1", "@EstimateIO": "0.01", "@EstimateCPU": "1e-06", "@AvgRowSize": "9", "@EstimatedTotalSubtreeCost": "0.0100023", "@Parallel": "0", "@EstimateRebinds": "0", "@EstimateRewinds": "0", "@EstimatedExecutionMode": "Row", "OutputList": null, "ScalarInsert": {"@DMLRequestSort": "0", "DefinedValues": {"DefinedValue": [{"ColumnReference": {"@Column": "Expr1002"}, "ScalarOperator": {"@ScalarString": "newid()", "Intrinsic": {"@FunctionName": "newid"}}}, {"ColumnReference": {"@Column": "Expr1003"}, "ScalarOperator": {"@ScalarString": "getdate()", "Identifier": {"ColumnReference": {"@Column": "ConstExpr1004", "ScalarOperator": {"Intrinsic": {"@FunctionName": "getdate"}}}}}}]}, "Object": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_SCORE]", "@Index": "[PK_T_TESTINNG_SCORE_1]", "@IndexKind": "Clustered", "@Storage": "RowStore"}, "SetPredicate": {"ScalarOperator": {"@ScalarString": "[PSYCHOLOGY_TEST_1].[dbo].[T_TESTING_SCORE].[T_TESTING_SCORE_ID] = RaiseIfNullInsert([Expr1002]),[PSYCHOLOGY_TEST_1].[dbo].[T_TESTING_SCORE].[SCORE] = RaiseIfNullInsert([@score]),[PSYCHOLOGY_TEST_1].[dbo].[T_TESTING_SCORE].[T_TESTING_STEP_ID] = RaiseIfNullInsert([@t_testing_step_id]),[PSYCHOLOGY_TEST_1].[dbo].[T_TESTING_SCORE].[OBJ_CREATED] = RaiseIfNullInsert([Expr1003])", "ScalarExpressionList": {"ScalarOperator": {"MultipleAssign": {"Assign": [{"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_SCORE]", "@Column": "T_TESTING_SCORE_ID"}, "ScalarOperator": {"Intrinsic": {"@FunctionName": "RaiseIfNullInsert", "ScalarOperator": {"Identifier": {"ColumnReference": {"@Column": "Expr1002"}}}}}}, {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_SCORE]", "@Column": "SCORE"}, "ScalarOperator": {"Intrinsic": {"@FunctionName": "RaiseIfNullInsert", "ScalarOperator": {"Identifier": {"ColumnReference": {"@Column": "@score"}}}}}}, {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_SCORE]", "@Column": "T_TESTING_STEP_ID"}, "ScalarOperator": {"Intrinsic": {"@FunctionName": "RaiseIfNullInsert", "ScalarOperator": {"Identifier": {"ColumnReference": {"@Column": "@t_testing_step_id"}}}}}}, {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_SCORE]", "@Column": "OBJ_CREATED"}, "ScalarOperator": {"Intrinsic": {"@FunctionName": "RaiseIfNullInsert", "ScalarOperator": {"Identifier": {"ColumnReference": {"@Column": "Expr1003"}}}}}}]}}}}}}}, "ParameterList": {"ColumnReference": [{"@Column": "@t_testing_step_id", "@ParameterDataType": "uniqueidentifier", "@ParameterCompiledValue": "{guid'E7FAB167-C47A-4865-A8AE-429FA778414C'}"}, {"@Column": "@score", "@ParameterDataType": "nvarchar(50)", "@ParameterCompiledValue": "N'a'"}]}}}}}, "Else": {"Statements": {"StmtSimple": {"@StatementText": "\r\nelse \r\nupdate t_testing_score set score = @score\r\nwhere t_testing_score_id = @t_testing_score_id", "@StatementId": "6", "@StatementCompId": "9", "@StatementType": "UPDATE", "@RetrievedFromCache": "false", "@StatementSubTreeCost": "0.0132841", "@StatementEstRows": "1", "@SecurityPolicyApplied": "false", "@StatementOptmLevel": "TRIVIAL", "@QueryHash": "0xE503003C986F57EF", "@QueryPlanHash": "0x74DEF1D919DC0E92", "@CardinalityEstimationModelVersion": "70", "StatementSetOptions": {"@QUOTED_IDENTIFIER": "true", "@ARITHABORT": "true", "@CONCAT_NULL_YIELDS_NULL": "true", "@ANSI_NULLS": "true", "@ANSI_PADDING": "true", "@ANSI_WARNINGS": "true", "@NUMERIC_ROUNDABORT": "false"}, "QueryPlan": {"@CachedPlanSize": "16", "@CompileTime": "2", "@CompileCPU": "2", "@CompileMemory": "216", "MemoryGrantInfo": {"@SerialRequiredMemory": "0", "@SerialDesiredMemory": "0", "@GrantedMemory": "0", "@MaxUsedMemory": "0"}, "OptimizerHardwareDependentProperties": {"@EstimatedAvailableMemoryGrant": "311472", "@EstimatedPagesCached": "77868", "@EstimatedAvailableDegreeOfParallelism": "2", "@MaxCompileMemory": "654432"}, "RelOp": {"@NodeId": "0", "@PhysicalOp": "Clustered Index Update", "@LogicalOp": "Update", "@EstimateRows": "1", "@EstimateIO": "0.01", "@EstimateCPU": "1e-06", "@AvgRowSize": "9", "@EstimatedTotalSubtreeCost": "0.0132841", "@Parallel": "0", "@EstimateRebinds": "0", "@EstimateRewinds": "0", "@EstimatedExecutionMode": "Row", "OutputList": null, "SimpleUpdate": {"@DMLRequestSort": "0", "Object": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_SCORE]", "@Index": "[PK_T_TESTINNG_SCORE_1]", "@IndexKind": "Clustered", "@Storage": "RowStore"}, "SeekPredicateNew": {"SeekKeys": {"Prefix": {"@ScanType": "EQ", "RangeColumns": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_SCORE]", "@Column": "T_TESTING_SCORE_ID"}}, "RangeExpressions": {"ScalarOperator": {"@ScalarString": "[@t_testing_score_id]", "Identifier": {"ColumnReference": {"@Column": "@t_testing_score_id"}}}}}}}, "SetPredicate": {"ScalarOperator": {"@ScalarString": "[PSYCHOLOGY_TEST_1].[dbo].[T_TESTING_SCORE].[SCORE] = RaiseIfNullUpdate([@score])", "ScalarExpressionList": {"ScalarOperator": {"MultipleAssign": {"Assign": {"ColumnReference": {"@Database": "[PSYCHOLOGY_TEST_1]", "@Schema": "[dbo]", "@Table": "[T_TESTING_SCORE]", "@Column": "SCORE"}, "ScalarOperator": {"Intrinsic": {"@FunctionName": "RaiseIfNullUpdate", "ScalarOperator": {"Identifier": {"ColumnReference": {"@Column": "@score"}}}}}}}}}}}}}, "ParameterList": {"ColumnReference": {"@Column": "@score", "@ParameterDataType": "nvarchar(50)", "@ParameterCompiledValue": "N'a'"}}}}}}}}}}}}}}}